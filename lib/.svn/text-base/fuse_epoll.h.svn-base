#ifndef _FUSE_EPOLL_H_
#define _FUSE_EPOLL_H_

#include <sys/epoll.h>

#define EPOLLSIZE 10

struct fuse_sock;
struct epoll;

struct epoll_op
{
int (*add)(struct epoll*,struct fuse_sock*);
int (*del)(struct epoll*,struct fuse_sock*);
int (*wait)(struct epoll*,int);
int (*destroy)(struct epoll*);
int (*open_write)(struct epoll *,struct fuse_sock*);
int (*close_write)(struct epoll*,struct fuse_sock*);
int (*open_read)(struct epoll *,struct fuse_sock*);
int (*close_read)(struct epoll*,struct fuse_sock*);
};

struct epoll
{
	int efd;
  	struct epoll_op *op;
	struct epoll_event *ev;
	int size;
};

int epoll_new(int,struct epoll**);
void fuse_open_write(struct fuse_sock *);
void fuse_open_read(struct fuse_sock *);
void fuse_close_write(struct fuse_sock *);
void fuse_close_read(struct fuse_sock *);
#endif
